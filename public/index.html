<!DOCTYPE html>
<html>
<head>
  <title>YouTube.js Demo</title>
  <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css" media="screen" charset="utf-8">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="javascripts/youtube.js"></script>
  <style>
    body{
      padding-top: 60px;
    }
    #videoContainer .well{
      position: relative;
    }
    #videoContainer .videoThumb, #videoContainer .blurred{
      height: 344px;
      width: 425px;
    }
    #videoContainer .video-meta{
      position: absolute;
      top: 20px;
      right: 20px;
      left: 20px;
    }
    #videoContainer h2.video-meta{
      line-height: 28px;
    }
    #videoContainer .video-meta span{
      background: rgba(0,0,0,0.5);
      color: #fff;
    }
    #videoContainer p.video-meta{
      bottom: 20px;
      top: auto;
      margin: 0;
      line-height: 22px;
    }
  </style>
</head>
<body>
  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
        <a class="brand" href="#">YouTube.js</a>
        <div class="nav-collapse">
          <ul class="nav">
            <li class="active"><a href="#">Home</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
  </div>
  
  <div class="container">
    <div class="row">
      <div class="span3">
        
        <div class="row">
          <div class="span3">
          <form class="" action="" id="usernameForm" method="get" accept-charset="utf-8">
            <label for="youtube_username">Youtube Username: </label>
            <input type="text" class="span3" name="youtube_username" value="" id="youtube_username">
            <p><input class="btn" type="submit" value="Get Videos."></p>
          </form>
          </div>
        </div>
        
        <div class="row">
          <div class="span3">
          <form class="" action="" id="searchForm" method="get" accept-charset="utf-8">
            <label for="youtube_query">Search: </label>
            <input type="text" name="youtube_query" value="" id="youtube_query">
            <select id="searchSort">
              <option value="relevance" select="selected">Relevance</option>
              <option value="viewCount">View Count</option>
              <option value="rating">Rating</option>
              <option value="published">Upload Date</option>
            </select>
            <p><input class="btn" type="submit" value="Get Videos."></p>
          </form>
          </div>
        </div>
        
      </div>
      <div class="span9">
        <div id="videoContainer" class="row"></div>
      </div>
    </div>
    
  </div>
  



  <script>
  $(function(){
    var youtube = new YouTubeJS();
    
    var userForm = document.getElementById('usernameForm');
    var searchForm = document.getElementById('searchForm');
    
    $('input[type="text"]').focus(function(){
      var input = this;
      setTimeout(function(){input.select();}, 100);
    });

    function replaceVideos(videos){
      var embeds = '';
      youtube.forEach(videos, function(video){
        embeds = '<div class="row"><div class="span6 offset1"><div class="well">'+
                    '<div class="videoThumb" id="'+video.id+'" style="background: url('+video.thumbnails[1].url+')">'+
                      '<div class="blurred"><h2 class="video-meta"><span>'+video.title+'</span></h2>'+
                      '<p class="video-meta"><span>'+video.author+'</span></p></div>'+
                    '</div>'+
                  '</div></div></div>'+embeds;
      });

      document.getElementById('videoContainer').innerHTML = embeds;
      
      $('#videoContainer .videoThumb').click(function(){
        var videoId = $(this)[0].id;
        var $container = $(this).parent();
        $container.empty();
        $container.append(youtube.embedCode(videoId));
      });
    };
    

    $(userForm).submit(function(){
      var username = document.getElementById('youtube_username').value;
      if(username){
        youtube.videoFeed({
          user: username
        }, replaceVideos);
        document.getElementById('youtube_username').blur();
      }
      return false;
    });


    $(searchForm).submit(function(){
      var query = document.getElementById('youtube_query').value;
      var searchSort = document.getElementById('searchSort').value;
      if(query){
        youtube.videoSearch({
          query: query,
          orderby: searchSort
        }, replaceVideos);
        document.getElementById('youtube_query').blur();
      }
      return false;
    });
    
    document.getElementById('searchSort').onchange = function(){
      $(searchForm).submit();
    };
  });
  </script>
</body>
</html>